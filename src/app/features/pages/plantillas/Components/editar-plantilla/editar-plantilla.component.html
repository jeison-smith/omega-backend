<div class="flex justify-content-center mt-6">
    <div class="col-10">
        <div class="card-edit">
            <div class="card-header">
                <div class="card-back">
                    <a [routerLink]="'/home/plantillas'">
                        <span class="material-symbols">arrow_back</span></a>

                    <button
                        class="inline-flex items-center gap-2 rounded-lg bg-sky-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-600 disabled:cursor-not-allowed disabled:bg-slate-300"
                        (click)="guardarPlantilla()"
                        [disabled]="!camposForm().valid || loading "
                    >
                        @if (loading) {
                          <div
                              class="h-4 w-4 animate-spin rounded-full border-2 border-white/40 border-t-white"
                          ></div>
                        } @else {
                          <span class="material-symbols">save</span>
                        }
                        Guardar
                    </button>
                    @if (plantilla.estado) {
                    <span class="inline-flex items-center rounded-full bg-emerald-100 px-2.5 py-1 text-xs font-semibold text-emerald-700">Activo</span>
                    }@else{
                    <span class="inline-flex items-center rounded-full bg-rose-100 px-2.5 py-1 text-xs font-semibold text-rose-700">Inactivo</span>
                    }
                    <div class="flex items-center gap-2 text-sm text-slate-600">
                        <label class="relative inline-flex h-6 w-12 shrink-0 cursor-pointer items-center">
                            <input
                                type="checkbox"
                                class="peer sr-only"
                                [checked]="plantilla.estado"
                                (change)="estadoPlantilla($event)"
                            >
                            <span
                                class="relative h-6 w-12 rounded-full bg-slate-300 transition-colors peer-checked:bg-emerald-500 after:absolute after:left-0.5 after:top-0.5 after:h-5 after:w-5 after:rounded-full after:bg-white after:transition-transform peer-checked:after:translate-x-6"
                            ></span>
                        </label>
                        <span>Activar o desactivar <br> formulario</span>
                    </div>
                </div>
                <button
                    class="ml-auto inline-flex items-center gap-2 rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:bg-slate-100"
                    (click)="goToVistaPrevia()"
                >
                    @if (loading) {
                      <div
                          class="h-4 w-4 animate-spin rounded-full border-2 border-slate-300 border-t-slate-600"
                      ></div>
                    } @else {
                      <span class="material-symbols">visibility</span>
                    }
                    Vista previa
                </button>
                <!-- <div class="card-actions">
                    <button class="btn-secondary-icon">
                        <span class="material-symbols mr-2">
                            file_copy
                        </span>
                        Duplicar
                    </button>
                    <button class="btn-danger-icon">
                        <span class="material-symbols mr-2">
                            delete
                        </span>
                        Eliminar
                    </button>
                </div> -->
            </div>
            <div class="card-body">
                <div class="card-body__info">
                    <span class="badge_secondary">{{plantilla.proyecto}}</span>
                    <!-- Contenedor del Nombre de la Plantilla -->
                    <div class="mt-3 flex flex-col items-start">
                        @if (!editandoNombre) {
                          <p class="flex items-center text-lg font-semibold text-slate-800">
                              {{ plantilla.nombrePlantilla }}
                              <span
                                  class="material-symbols ml-2 cursor-pointer text-lg text-sky-500 transition hover:text-sky-700"
                                  (click)="toggleEditarNombre()"
                              >edit</span>
                          </p>
                        } @else {
                          <input
                              type="text"
                              [value]="nombreTemporal"
                              class="w-auto border-b-2 border-sky-500 bg-transparent text-xl font-bold text-black outline-none focus:border-sky-700"
                              (input)="nombreTemporal = $any($event.target).value" (blur)="guardarNombre()"
                              (keyup.enter)="guardarNombre()" (keyup.esc)="cancelarEdicionNombre()" />
                        }
                    </div>
                    <!-- <p class="nombrePlantilla mt-3">
                        {{plantilla?.nombrePlantilla}}
                        <span class="material-symbols">edit</span>
                    </p> -->
                </div>
                <div class="table-container__plantilla">
                    <table class="table-plantilla">
                        <thead>
                            <tr>
                                <th>Creador: </th>
                                <th>Fecha de creación</th>
                                <th>Fecha ult. actualización</th>
                                <th>Gestiones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{plantilla.nombreCreador | titlecase}}</td>
                                <td>{{plantilla.fechaCreacion | date:"dd/MM/yyyy"}}</td>
                                <td>{{plantilla.fechaModificacion| date:"dd/MM/yyyy"}}</td>
                                <td>{{plantilla.gestiones}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <editar-campos-plantilla [camposs]="camposArray" (actualizarCampos)="triggerActualizarCampos()"
            [esRamificacion]="false">
        </editar-campos-plantilla>

    </div>
</div>

