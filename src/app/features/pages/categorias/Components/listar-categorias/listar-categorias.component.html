<!-- Contenedor Principal Centrado -->
<div class="mx-auto max-w-[1400px] px-10 py-5">
    <!-- Botón Crear Categoría -->
    <div class="mb-6">
        <button
            class="inline-flex items-center gap-2 rounded-xl bg-sky-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-600"
            (click)="navegarACrearCategoria()"
        >
            <span class="material-symbols">add</span>
            Crear Categoría
        </button>
    </div>

    <!-- Buscador -->
    <div class="mb-6 flex justify-end rounded-lg bg-white p-4 shadow-sm">
        <div class="flex items-center">
            <input
                type="text"
                placeholder="Filtra aquí"
                #filterInput
                class="h-10 min-w-[250px] rounded-l-lg border border-slate-300 border-r-0 px-4 text-sm text-slate-700 outline-none"
            >
            <button
                class="inline-flex h-10 items-center gap-2 rounded-r-lg border border-purple-200 bg-purple-100 px-4 text-sm font-semibold text-slate-900 transition hover:bg-purple-200"
                (click)="filtrar(filterInput.value)"
            >
                <span class="material-symbols">search</span>
                Buscar
            </button>
        </div>
    </div>

    <!-- Tabla de Categorías -->
    <div class="overflow-hidden rounded-lg bg-white shadow-sm">
        <table class="w-full border-collapse">
            <thead>
                <tr>
                    <th class="bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700">Id</th>
                    <th class="bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700">Nombre</th>
                    <th class="bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700">Creador</th>
                    <th class="bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700">
                        Fecha de creación
                    </th>
                    <th class="bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700">
                        Últ. actualización
                    </th>
                    <th class="bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700">Estado</th>
                    <th class="bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700">Acción</th>
                </tr>
            </thead>

            <tbody>
                @for (item of registrosPaginados; track item.id) {
                <tr class="transition hover:bg-slate-50">
                    <!-- ID -->
                    <td class="px-4 py-3 text-sm text-slate-700">{{ item.id }}</td>

                    <!-- Nombre -->
                    <td class="px-4 py-3 text-sm text-slate-700">{{ item.nombre }}</td>

                    <!-- Creador -->
                    <td class="px-4 py-3 text-sm text-slate-700">{{ item.creadorNombre }}</td>

                    <!-- Fecha de Creación -->
                    <td class="px-4 py-3 text-sm text-slate-700">
                        {{ item.fechaCreacion | date:"dd/MM/yyyy" }}
                    </td>

                    <!-- Última Actualización -->
                    <td class="px-4 py-3 text-sm text-slate-700">
                        {{ item.fechaModificacion | date:"dd/MM/yyyy" }}
                    </td>

                    <!-- Estado con Toggle -->
                    <td class="px-4 py-3 text-sm text-slate-700">
                        <div class="flex items-center gap-2">
                            <span
                                [class]="
                                    item.estado
                                        ? 'inline-flex items-center rounded-full bg-emerald-100 px-2.5 py-1 text-xs font-semibold text-emerald-700'
                                        : 'inline-flex items-center rounded-full bg-rose-100 px-2.5 py-1 text-xs font-semibold text-rose-700'
                                "
                            >
                                {{ item.estado ? 'Activo' : 'Inactivo' }}
                            </span>

                            <!-- Toggle Switch -->
                            <label class="relative inline-flex h-6 w-12 shrink-0 cursor-pointer items-center">
                                <input
                                    type="checkbox"
                                    class="peer sr-only"
                                    [checked]="item.estado"
                                    (change)="cambiarEstado(item.id, !item.estado)"
                                >
                                <span
                                    class="relative h-6 w-12 rounded-full bg-slate-300 transition-colors peer-checked:bg-emerald-500 after:absolute after:left-0.5 after:top-0.5 after:h-5 after:w-5 after:rounded-full after:bg-white after:transition-transform peer-checked:after:translate-x-6"
                                ></span>
                            </label>

                            <span class="whitespace-nowrap text-xs text-slate-500">
                                Activar o desactivar proyecto
                            </span>
                        </div>
                    </td>

                    <!-- Acción: Crear Plantilla -->
                    <td class="px-4 py-3 text-sm text-slate-700">
                        <button
                            class="inline-flex items-center gap-1 rounded-lg bg-sky-500 px-3 py-1.5 text-xs font-semibold text-white transition hover:bg-sky-600 disabled:cursor-not-allowed disabled:bg-slate-300"
                            (click)="navegarACrearPlantilla(item.id)"
                            [disabled]="!item.estado"
                        >
                            <span class="material-symbols">add</span>
                            Crear Categoría
                        </button>
                    </td>
                </tr>
                } @empty {
                <tr>
                    <td colspan="7" class="py-4 text-center text-sm text-slate-400">
                        No se encontraron categorías
                    </td>
                </tr>
                }
            </tbody>
        </table>

        <!-- Paginación -->
        <shared-paginacion [datos]="listaCategorias" [totalRegistros]="totalRegistros"
            [registrosPorPagina]="registrosPorPagina" (cambioPagina)="onPaginaCambiada($event)">
        </shared-paginacion>
    </div>
</div>
